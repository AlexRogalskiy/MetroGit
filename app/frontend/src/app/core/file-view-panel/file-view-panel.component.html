<div class="file-view-container d-flex flex-column align-items-stretch justify-content-stretch" *ngIf="_fileDetail">
  <div class="text-center mb-2">
    <div class="btn-group btn-group-toggle" data-toggle="buttons" ngbRadioGroup [(ngModel)]="mode">
      <label ngbButtonLabel class="btn btn-secondary active">
        <input ngbButton type="radio" name="options" id="option1" autocomplete="off" [value]="'hunk'"> Hunks
      </label>
      <label ngbButtonLabel class="btn btn-secondary">
        <input ngbButton type="radio" name="options" id="option2" autocomplete="off" [value]="'file'"> File
      </label>
    </div>
  </div>
  <div class="hunk-containers pr-1">
    <div class="hunk-container" *ngFor="let hunk of _fileDetail.hunks">
      <div class="hunk-action text-right mb-1">
        <a class="btn btn-success btn-sm" *ngIf="_fileDetail.commit === 'workdir'" (click)="stageHunk(hunk)">Stage Hunk</a>
        <a class="btn btn-danger btn-sm" *ngIf="_fileDetail.commit === 'tree'" (click)="unstageHunk(hunk)">Unstage Hunk</a>
      </div>
      <div class="d-flex">
        <div class="hunk-headers" *ngIf="_fileDetail.hunks[0] && (_fileDetail.hunks[0].lines[0].op !== 'binary')">
          <div class="hunk mb-3">
            <div class="line d-flex" *ngFor="let line of hunk.lines" [class.added]="line.op==='+'" [class.deleted]="line.op==='-'">
              <div class="op">{{line.op}}</div>
              <div class="lineno">{{line.oldLineno > 0 ? line.oldLineno : ""}}</div>
              <div class="lineno">{{line.newLineno > 0 ? line.newLineno : ""}}</div>
            </div>
          </div>
        </div>
        <div class="hunk-contents">
          <div class="hunk-contents-inner">
            <div class="hunk mb-3">
              <div class="line" *ngFor="let line of hunk.lines" [class.added]="line.op==='+'" [class.deleted]="line.op==='-'">
                <div class="content">
                  <pre>{{line.content}}</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-spinner [enabled]="loading"></app-spinner>